<!--div class="grid">
  <div class="col-12">
    <div class="card">
      <h1></h1>
    </div>
  </div>
</div-->

<div class="grid">
  <div class="col-4">
    <div class="card">
      <h2>Recherches batiments</h2>
      <hr />
      <form [formGroup]="mapForm" (ngSubmit)="onSubmit()">
        <div class="p-fluid p-formgrid p-grid">
          
          <!-- Sélection de la Région -->
          <div class="p-field p-col-12 p-md-6 mt-4">
            <label for="region">Région<span class="text-danger">*</span></label>
            <p-dropdown
              id="region"
              formControlName="region"
              [options]="regions"
              optionLabel="label"
              optionValue="value"
              placeholder="Sélectionnez une Région"
              (onChange)="onRegionChange($event.value)"
              [filter]="true"
              filterBy="label"
              [autoDisplayFirst]="false"
            ></p-dropdown>
            <small class="p-error" *ngIf="mapForm.get('region')?.invalid && mapForm.get('region')?.touched">
              Ce champ est requis.
            </small>
          </div>
          
          <!-- Sélection de la Province -->
          <div class="p-field p-col-12 p-md-6 mt-4">
            <label for="province">Province<span class="text-danger">*</span></label>
            <p-dropdown
              id="province"
              formControlName="province"
              [options]="filteredProvincesOptions"
              optionLabel="label"
              optionValue="value"
              placeholder="Sélectionnez une Province"
              (onChange)="onProvinceChange($event.value)"
              [filter]="true"
              filterBy="label"
              [autoDisplayFirst]="false"
              [disabled]="!filteredProvincesOptions.length"
            ></p-dropdown>
            <small class="p-error" *ngIf="mapForm.get('province')?.invalid && mapForm.get('province')?.touched">
              Ce champ est requis.
            </small>
          </div>
          
          <!-- Sélection du Département -->
          <div class="p-field p-col-12 p-md-6 mt-4">
            <label for="departement">Département<span class="text-danger">*</span></label>
            <p-dropdown
              id="departement"
              formControlName="commune"
              [options]="filteredDepartementsOptions"
              optionLabel="label"
              optionValue="value"
              placeholder="Sélectionnez un Département"
              (onChange)="onDepartementChange($event.value)"
              [filter]="true"
              filterBy="label"
              [autoDisplayFirst]="false"
              [disabled]="!filteredDepartementsOptions.length"
            ></p-dropdown>
            <small class="p-error" *ngIf="mapForm.get('commune')?.invalid && mapForm.get('commune')?.touched">
              Ce champ est requis.
            </small>
          </div>
          
          <!-- Sélection du Secteur -->
          <div class="p-field p-col-12 p-md-6 mt-4">
            <label for="secteur">Secteur<span class="text-danger">*</span></label>
            <p-dropdown
              id="secteur"
              formControlName="sector"
              [options]="filteredSecteursOptions"
              optionLabel="label"
              optionValue="value"
              placeholder="Sélectionnez un Secteur"
              [filter]="true"
              filterBy="label"
              [autoDisplayFirst]="false"
              [disabled]="!filteredSecteursOptions.length"
            ></p-dropdown>
            <small class="p-error" *ngIf="mapForm.get('sector')?.invalid && mapForm.get('sector')?.touched">
              Ce champ est requis.
            </small>
          </div>
          
          <!-- Bouton de Soumission -->
          <div class="p-field p-col-12 mt-4">
            <button type="submit" pButton label="Soumettre" [disabled]="mapForm.invalid" class="p-mt-2"></button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="col-8">
    <div class="card">
      <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3898.1754641846023!2d-1.523097525805599!3d12.303967729165658!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xe2ebd5aaa267173%3A0x2378abc6613463d0!2sDirection%20G%C3%A9n%C3%A9rale%20des%20Affaires%20Immobili%C3%A8res%20et%20de%20l&#39;Equipement%20de%20l&#39;Etat%20(DGAIE)!5e0!3m2!1sfr!2sbf!4v1721281746350!5m2!1sfr!2sbf"
          width="100%"
          height="500"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          class="rounded"
        ></iframe>
    </div>

  </div>
</div>

<!--div class="container mt-4">
  <div *ngIf="getFormValidationErrors().length" class="p-mt-4">
    <div *ngFor="let error of getFormValidationErrors()" class="p-error">
      {{ error }}
    </div>
  </div>
  <div *ngIf="submittedData" class="p-mt-4">
    <h3>Données Soumises</h3>
    <pre>{{ submittedData | json }}</pre>
  </div>
</div-->